<!-- This is a comment in HTML -->
<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>EZ KeyZ</title>
  <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>

<header>
  <h1>Welcome to Piano Synth Jam Session!</h1>
</header>

<main>
  <h2>Click the loop buttons to play the piano loops </h2>
  <h3>Use the Mouse or keyboard to play the synth </h3>
  <h4><i>*Use in Firefox and disable quickfind by going to Firefox menu>Preferences>Advanced>General>uncheck "search for text when I start typing"*</i> </h4>
  <button id="loop1Button" class="btn-transport" type="button">Loop 1</button>
  <button id="loop2Button" class="btn-transport" type="button">Loop 2</button>
  <button id="loop3Button" class="btn-transport" type="button">Loop 3</button>
  <button id="playButtonC" class="btn-transport" type="button">C</button>
  <button id="playButtonCS" class="btn-transport" type="button">C#/Db</button>
  <button id="playButtonD" class="btn-transport" type="button">D</button>
  <button id="playButtonDS" class="btn-transport" type="button">D#/Eb</button>
  <button id="playButtonE" class="btn-transport" type="button">E</button>
  <button id="playButtonF" class="btn-transport" type="button">F</button>
  <button id="playButtonFS" class="btn-transport" type="button">F#/Gb</button>
  <button id="playButtonG" class="btn-transport" type="button">G</button>
  <button id="playButtonGS" class="btn-transport" type="button">G#/Ab</button>
  <button id="playButtonA" class="btn-transport" type="button">A</button>
  <button id="playButtonAS" class="btn-transport" type="button">A#/Bb</button>
  <button id="playButtonB" class="btn-transport" type="button">B</button>
  <button id="playButtonHiC" class="btn-transport" type="button">Hi C</button>
  <button id="stopButton" class="btn-transport" type="button">Stop</button>

<script src="js/Tone.js"></script>

<script>


// Create a synth and connect it to the pitch shifter

var synthA = new Tone.Synth({
  oscillator: {
    type: 'fmsquare',
    modulationType: 'triangle',
    modulationIndex: 0,
    harmonicity: 0
  },
  envelope: {
    attack: 0.01,
    decay: 0.1,
    sustain: 0.9,
    release: 0.1
  }
}).toMaster()

// Sample code to load a sound file
// NOTE: This sound file is not played in this script

var piano1 = new Tone.Player('audio/Piano1.mp3').toMaster();
var piano2 = new Tone.Player('audio/Piano2.mp3').toMaster();
var piano3 = new Tone.Player('audio/Piano3.mp3').toMaster();


// C
document.querySelector('#playButtonC').addEventListener('mousedown', function() {

    synthA.triggerAttack('C4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonC').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

// C#

document.querySelector('#playButtonCS').addEventListener('mousedown', function() {

    synthA.triggerAttack('C#4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonCS').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

// D

document.querySelector('#playButtonD').addEventListener('mousedown', function() {

    synthA.triggerAttack('D4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonD').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

// D#

document.querySelector('#playButtonDS').addEventListener('mousedown', function() {

    synthA.triggerAttack('D#4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonDS').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

// E

document.querySelector('#playButtonE').addEventListener('mousedown', function() {

    synthA.triggerAttack('E4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonE').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

// F

document.querySelector('#playButtonF').addEventListener('mousedown', function() {

    synthA.triggerAttack('F4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonF').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

// F#

document.querySelector('#playButtonFS').addEventListener('mousedown', function() {

    synthA.triggerAttack('F#4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonFS').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//G

document.querySelector('#playButtonG').addEventListener('mousedown', function() {

    synthA.triggerAttack('G4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonG').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//G#

document.querySelector('#playButtonGS').addEventListener('mousedown', function() {

    synthA.triggerAttack('G#4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonGS').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//A

document.querySelector('#playButtonA').addEventListener('mousedown', function() {

    synthA.triggerAttack('A4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonA').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//A#

document.querySelector('#playButtonAS').addEventListener('mousedown', function() {

    synthA.triggerAttack('A#4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonAS').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//B

document.querySelector('#playButtonB').addEventListener('mousedown', function() {

    synthA.triggerAttack('B4')
    synthA.volume.value = -20

});

document.querySelector('#playButtonB').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//HiC

document.querySelector('#playButtonHiC').addEventListener('mousedown', function() {

    synthA.triggerAttack('C5')
    synthA.volume.value = -20

});

document.querySelector('#playButtonHiC').addEventListener('mouseup', function() {

    synthA.triggerRelease()
})

//StopButton

document.querySelector('#stopButton').addEventListener('mousedown', function() {
  console.log('The stopButton has been clicked.');
  piano1.stop();
  piano2.stop();
  piano3.stop();

});

// The following block of code will run when the loop1 button is clicked
document.querySelector('#loop1Button').onclick = function() {
  console.log('The loop1Button has been clicked.');

  // start loop 1
  piano1.start();

};

// The following block of code will run when the loop2 button is clicked
document.querySelector('#loop2Button').onclick = function() {
  console.log('The loop2Button has been clicked.');

  // start loop 2
  piano2.start();
};

// The following block of code will run when the loop3 button is clicked
document.querySelector('#loop3Button').onclick = function() {
  console.log('The loop3Button has been clicked.');

  // start loop 3
  piano3.start();
};

document.addEventListener('keydown', PlayIt);

function PlayIt(e) {
    console.log(e.code);
    if (e.code == 'KeyA') {
      synthA.triggerAttack('C4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyW') {
       synthA.triggerAttack('C#4');
       synthA.volume.value = -20;
    }
    else if (e.code == 'KeyS') {
      synthA.triggerAttack('D4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyE') {
      synthA.triggerAttack('D#4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyD') {
      synthA.triggerAttack('E4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyF') {
      synthA.triggerAttack('F4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyT') {
      synthA.triggerAttack('F#4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyG') {
      synthA.triggerAttack('G4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyY') {
      synthA.triggerAttack('G#4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyH') {
      synthA.triggerAttack('A4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyU') {
      synthA.triggerAttack('A#4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyJ') {
      synthA.triggerAttack('B4');
      synthA.volume.value = -20;
    }
    else if (e.code == 'KeyK') {
      synthA.triggerAttack('C5');
      synthA.volume.value = -20;
    }};



document.addEventListener('keyup', StopIt);

function StopIt(e) {
    console.log(e.code);
    if (e.code == 'KeyA') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyW') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyS') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyE') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyD') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyF') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyT') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyG') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyY') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyH') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyU') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyJ') {
      synthA.triggerRelease();
    }
    else if (e.code == 'KeyK') {
      synthA.triggerRelease();
    }};

</script>

</body>
</html>
